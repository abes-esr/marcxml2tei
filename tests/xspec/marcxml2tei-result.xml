<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.jenitennison.com/xslt/xspec"
        xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec"
        stylesheet="file:/home/mathis/Dev/ABES/marcxml2tei/xslt/marcxml2tei-1.0.xsl"
        date="2021-03-25T12:19:45.09594252+01:00">
   <scenario id="scenario1"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>joinTitleElements with a title and subtitle</label>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec"
                 template="joinTitleElements">
            <x:param name="titles">
               <value>A title</value>
            </x:param>
            <x:param name="subtitles">
               <value>A subtitle</value>
            </x:param>
         </x:call>
      </input-wrap>
      <result select="/text()">
         <content-wrap xmlns="">A title : A subtitle</content-wrap>
      </result>
      <test id="scenario1-expect1" successful="true">
         <label>Title and subtitles should be separated with `:` with no leading `.`</label>
         <expect select="/text()">
            <content-wrap xmlns="">A title : A subtitle</content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario2"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>joinTitleElements with title and subtitle and a subsubtitle</label>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec"
                 template="joinTitleElements">
            <x:param name="titles">
               <value>A title</value>
            </x:param>
            <x:param name="subtitles">
               <value>A subtitle</value>
               <value>Another subtitle</value>
            </x:param>
         </x:call>
      </input-wrap>
      <result select="/text()">
         <content-wrap xmlns="">A title : A subtitle. Another subtitle</content-wrap>
      </result>
      <test id="scenario2-expect1" successful="true">
         <label>Title and subtitles should be separated with `:` and subtitles with `.` with no leading `.`</label>
         <expect select="/text()">
            <content-wrap xmlns="">A title : A subtitle. Another subtitle</content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario3"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>editionStmt without fileLocation</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="328" ind1=" " ind2="1">
                  <subfield code="d">2004</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="editionStmt"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <editionStmt xmlns:ext="http://exslt.org/common"
                         xmlns:hal="http://hal.archives-ouvertes.fr/"
                         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
               <edition>
                  <date type="whenWritten">2004</date>
               </edition>
            </editionStmt>
         </content-wrap>
      </result>
      <test id="scenario3-expect1" successful="true">
         <label>Should display whenWritten. The embargo node (notBefore) shouldn't show up.</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <editionStmt xmlns:ext="http://exslt.org/common"
                            xmlns:hal="http://hal.archives-ouvertes.fr/"
                            xmlns:x="http://www.jenitennison.com/xslt/xspec"
                            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <edition>
                     <date type="whenWritten">2004</date>
                  </edition>
               </editionStmt>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario4"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>Original title only</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="200" ind1="1" ind2=" ">
                  <subfield code="a">A title</subfield>
                  <subfield code="e">A subtitle</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="title"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <title xmlns:ext="http://exslt.org/common"
                   xmlns:hal="http://hal.archives-ouvertes.fr/"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xml:lang="fr">A title : A subtitle</title>
         </content-wrap>
      </result>
      <test id="scenario4-expect1" successful="true">
         <label>Shoud output the original title.</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <title xmlns:ext="http://exslt.org/common"
                      xmlns:hal="http://hal.archives-ouvertes.fr/"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xml:lang="fr">A title : A subtitle</title>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario5"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>Original and translated title</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="200" ind1="1" ind2=" ">
                  <subfield code="a">Un titre</subfield>
                  <subfield code="e">Un sous-titre</subfield>
               </datafield>
               <datafield tag="541" ind1="|" ind2=" ">
                  <subfield code="a">A title</subfield>
                  <subfield code="e">A subtitle</subfield>
                  <subfield code="z">eng</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="title"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <title xmlns:ext="http://exslt.org/common"
                   xmlns:hal="http://hal.archives-ouvertes.fr/"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xml:lang="fr">Un titre : Un sous-titre</title>
            <title xmlns:ext="http://exslt.org/common"
                   xmlns:hal="http://hal.archives-ouvertes.fr/"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xml:lang="en">A title : A subtitle</title>
         </content-wrap>
      </result>
      <test id="scenario5-expect1" successful="true">
         <label>Shoud output the original and the translated title.</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <title xmlns:ext="http://exslt.org/common"
                      xmlns:hal="http://hal.archives-ouvertes.fr/"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xml:lang="fr">Un titre : Un sous-titre</title>
               <title xmlns:ext="http://exslt.org/common"
                      xmlns:hal="http://hal.archives-ouvertes.fr/"
                      xmlns:x="http://www.jenitennison.com/xslt/xspec"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xml:lang="en">A title : A subtitle</title>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario6"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>Author</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="700" ind1=" " ind2="1">
                  <subfield code="3">12345689X</subfield>
                  <subfield code="a">Doe</subfield>
                  <subfield code="b">John</subfield>
                  <subfield code="4">070</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="author"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <author xmlns:ext="http://exslt.org/common"
                    xmlns:hal="http://hal.archives-ouvertes.fr/"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    role="aut">
               <persName>
                  <forename type="first">Doe</forename>
                  <surname>John</surname>
               </persName>
               <idno type="IdRef">https://www.idref.fr/12345689X</idno>
            </author>
         </content-wrap>
      </result>
      <test id="scenario6-expect1" successful="true">
         <label>Should output the author.</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <author xmlns:ext="http://exslt.org/common"
                       xmlns:hal="http://hal.archives-ouvertes.fr/"
                       xmlns:x="http://www.jenitennison.com/xslt/xspec"
                       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                       role="aut">
                  <persName>
                     <forename type="first">Doe</forename>
                     <surname>John</surname>
                  </persName>
                  <idno type="IdRef">https://www.idref.fr/12345689X</idno>
               </author>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario7"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>Author with invalid function code</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="700" ind1=" " ind2="1">
                  <subfield code="3">12345689X</subfield>
                  <subfield code="a">Doe</subfield>
                  <subfield code="b">John</subfield>
                  <subfield code="4">XXX</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="author"/>
      </input-wrap>
      <result select="()"/>
      <test id="scenario7-expect1" successful="true">
         <label>Author with invalid function code shouldn't show up.</label>
         <expect select="()"/>
      </test>
   </scenario>
   <scenario id="scenario8"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>Monogr</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="328" ind1=" " ind2="1">
                  <subfield code="d">2020</subfield>
               </datafield>
               <datafield tag="711" ind1="0" ind2="2">
                  <subfield code="3">026402920</subfield>
                  <subfield code="a">Université d'Angers</subfield>
                  <subfield code="4">295</subfield>
               </datafield>
               <datafield tag="701" ind1=" " ind2="1">
                  <subfield code="3">031290035</subfield>
                  <subfield code="a">Bellamy</subfield>
                  <subfield code="b">David</subfield>
                  <subfield code="f">1965-....</subfield>
                  <subfield code="4">727</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="monogr"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <monogr xmlns:ext="http://exslt.org/common"
                    xmlns:hal="http://hal.archives-ouvertes.fr/"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
               <imprint>
                  <date type="dateDefended">2020-01-01</date>
               </imprint>
               <authority type="institution">Université d'Angers</authority>
               <authority type="supervisor">David Bellamy</authority>
            </monogr>
         </content-wrap>
      </result>
      <test id="scenario8-expect1" successful="true">
         <label>Should display monogr data.</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <monogr xmlns:ext="http://exslt.org/common"
                       xmlns:hal="http://hal.archives-ouvertes.fr/"
                       xmlns:x="http://www.jenitennison.com/xslt/xspec"
                       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <imprint>
                     <date type="dateDefended">2020-01-01</date>
                  </imprint>
                  <authority type="institution">Université d'Angers</authority>
                  <authority type="supervisor">David Bellamy</authority>
               </monogr>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario9"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>Monog with incomplete defense date.</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="328" ind1=" " ind2="1">
                  <subfield code="d">2020</subfield>
               </datafield>
               <datafield tag="711" ind1="0" ind2="2">
                  <subfield code="3">026402920</subfield>
                  <subfield code="a">Université d'Angers</subfield>
                  <subfield code="4">295</subfield>
               </datafield>
               <datafield tag="701" ind1=" " ind2="1">
                  <subfield code="3">031290035</subfield>
                  <subfield code="a">Bellamy</subfield>
                  <subfield code="b">David</subfield>
                  <subfield code="f">1965-....</subfield>
                  <subfield code="4">727</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="monogr"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <monogr xmlns:ext="http://exslt.org/common"
                    xmlns:hal="http://hal.archives-ouvertes.fr/"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
               <imprint>
                  <date type="dateDefended">2020-01-01</date>
               </imprint>
               <authority type="institution">Université d'Angers</authority>
               <authority type="supervisor">David Bellamy</authority>
            </monogr>
         </content-wrap>
      </result>
      <test id="scenario9-expect1" successful="true">
         <label>Defense date YYYY should be reformated automatically to YYY-MM-DD.</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <monogr xmlns:ext="http://exslt.org/common"
                       xmlns:hal="http://hal.archives-ouvertes.fr/"
                       xmlns:x="http://www.jenitennison.com/xslt/xspec"
                       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <imprint>
                     <date type="dateDefended">2020-01-01</date>
                  </imprint>
                  <authority type="institution">Université d'Angers</authority>
                  <authority type="supervisor">David Bellamy</authority>
               </monogr>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario10"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>Monogr invalid function code.</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="328" ind1=" " ind2="1">
                  <subfield code="d">2020</subfield>
               </datafield>
               <datafield tag="711" ind1="0" ind2="2">
                  <subfield code="3">026402920</subfield>
                  <subfield code="a">Université d'Angers</subfield>
                  <subfield code="4">XXX</subfield>
               </datafield>
               <datafield tag="701" ind1=" " ind2="1">
                  <subfield code="3">031290035</subfield>
                  <subfield code="a">Bellamy</subfield>
                  <subfield code="b">David</subfield>
                  <subfield code="f">1965-....</subfield>
                  <subfield code="4">XXX</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="monogr"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <monogr xmlns:ext="http://exslt.org/common"
                    xmlns:hal="http://hal.archives-ouvertes.fr/"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
               <imprint>
                  <date type="dateDefended">2020-01-01</date>
               </imprint>
            </monogr>
         </content-wrap>
      </result>
      <test id="scenario10-expect1" successful="true">
         <label>Authority with invalid function code shouldn't show up.</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <monogr xmlns:ext="http://exslt.org/common"
                       xmlns:hal="http://hal.archives-ouvertes.fr/"
                       xmlns:x="http://www.jenitennison.com/xslt/xspec"
                       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <imprint>
                     <date type="dateDefended">2020-01-01</date>
                  </imprint>
               </monogr>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario11"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>profileDesc without keywords and without abstract</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record>
               <datafield tag="102" ind1=" " ind2=" ">
                  <subfield code="a">FR</subfield>
               </datafield>
               <datafield tag="686" ind1=" " ind2=" ">
                  <subfield code="a">940</subfield>
                  <subfield code="2">TEF</subfield>
               </datafield>
            </record>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="profileDesc"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <profileDesc xmlns:ext="http://exslt.org/common"
                         xmlns:hal="http://hal.archives-ouvertes.fr/"
                         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
               <textClass>
                  <classCode scheme="halDomain" n="SHS:HIST"/>
                  <classCode scheme="halTypology" n="MEM"/>
               </textClass>
            </profileDesc>
         </content-wrap>
      </result>
      <test id="scenario11-expect1" successful="true">
         <label>Should display profileDesc data</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <profileDesc xmlns:ext="http://exslt.org/common"
                            xmlns:hal="http://hal.archives-ouvertes.fr/"
                            xmlns:x="http://www.jenitennison.com/xslt/xspec"
                            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <textClass>
                     <classCode scheme="halDomain" n="SHS:HIST"/>
                     <classCode scheme="halTypology" n="MEM"/>
                  </textClass>
               </profileDesc>
            </content-wrap>
         </expect>
      </test>
   </scenario>
   <scenario id="scenario12"
             xspec="file:/home/mathis/Dev/ABES/marcxml2tei/tests/marcxml2tei.xspec">
      <label>profileDesc without 102 and 686</label>
      <input-wrap xmlns="">
         <x:context xmlns:x="http://www.jenitennison.com/xslt/xspec">
            <record/>
         </x:context>
      </input-wrap>
      <input-wrap xmlns="">
         <x:call xmlns:x="http://www.jenitennison.com/xslt/xspec" template="profileDesc"/>
      </input-wrap>
      <result select="/element()">
         <content-wrap xmlns="">
            <profileDesc xmlns:ext="http://exslt.org/common"
                         xmlns:hal="http://hal.archives-ouvertes.fr/"
                         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
               <textClass>
                  <classCode scheme="halTypology" n="MEM"/>
               </textClass>
            </profileDesc>
         </content-wrap>
      </result>
      <test id="scenario12-expect1" successful="true">
         <label>Should display profileDesc data</label>
         <expect select="/element()">
            <content-wrap xmlns="">
               <profileDesc xmlns:ext="http://exslt.org/common"
                            xmlns:hal="http://hal.archives-ouvertes.fr/"
                            xmlns:x="http://www.jenitennison.com/xslt/xspec"
                            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                  <textClass>
                     <classCode scheme="halTypology" n="MEM"/>
                  </textClass>
               </profileDesc>
            </content-wrap>
         </expect>
      </test>
   </scenario>
</report>
